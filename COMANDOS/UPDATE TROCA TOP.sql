SELECT CODTIPOPER FROM TGFCAB WHERE NUNOTA = 296508

UPDATE TGFCAB SET CODTIPOPER = 900, DHTIPOPER = ( select MAX (DHALTER) FROM TGFTOP WHERE CODTIPOPER = 900)
WHERE NUNOTA = 296508 AND TIPMOV = 'V'